### Makefile for the ldpc project
### Generated by Bluespec Workstation on Fri Mar 22 16:14:51 IST 2019

TOPMOD = mkLdpcTb
TOPFILE = LdpcTb.bsv
BSC_C_FLAGS += \
	-Xc++  -D_GLIBCXX_USE_CXX11_ABI=0 \
	-Xl -v \
	-Xc -O3 -Xc++ -O3 
TMPDIR=-bdir build -simdir build -info-dir build

default: full_clean compile link

bdir:
	mkdir -p build

.PHONY: compile
compile: $(SOURCES) bdir
	@echo Compiling...
	bsc -u -sim -D DBG -elab $(TMPDIR) -keep-fires -p .:%/Prelude:%/Libraries:%/Libraries/BlueNoC:../bsv -g $(TOPMOD) $(TOPFILE)
	@echo Compilation finished

.PHONY: link
link:
	@echo Linking...
	bsc -e $(TOPMOD) -sim $(BSC_C_FLAGS) $(TMPDIR) -o ./out -keep-fires 
	@echo Linking finished

.PHONY: simulate
simulate:
	@echo Simulation...
	./out 
	@echo Simulation finished

.PHONY: full_clean
full_clean:
	rm -f build/* out*
