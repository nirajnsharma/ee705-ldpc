.PHONY : all
DOC ?= fileName
ROOT ?= boilerplate
SOURCES = LdpcCore.bsv.nw Nodes.bsv.nw

all : documentation rtl clean

weave: $(SOURCES)
	noweave -n -delay -index LdpcCore.bsv.nw > LdpcCore.tex
	noweave -n -delay -index Nodes.bsv.nw > Nodes.tex
tangle: $(SOURCES)
	notangle -R"boilerplate" LdpcCore.bsv.nw > LdpcCore.bsv
	notangle -R"type definitions" LdpcCore.bsv.nw  > LdpcTypes.bsv
	notangle -R"boilerplate" Nodes.bsv.nw > Nodes.bsv
documentation: weave
	mv LdpcCore.tex ../../resources/
	mv Nodes.tex ../../resources/
rtl: tangle
	make -f Makefile.hw compile

.PHONY: clean
doc_clean:
	rm -f *.log *.aux
full_clean:
	rm -f *.log *.aux *.tex *.bsv
